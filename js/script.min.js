!function(){"use strict";function e(e){var t=document.getElementById("inputName"),n=document.createElement("li"),a=document.createTextNode(t.value);""!==t.value&&"Type item name here"!==t.value&&(n.appendChild(a),n.className="groceryItem",document.getElementById("groceryList").appendChild(n),e.push(t.value),localStorage.groceryList=JSON.stringify(e),t.value="Type item name here")}function t(e,t){var n=e.target,a=n.textContent,r=document.getElementsByClassName("groceryItem");t(e,n,a,r,Array.prototype.slice.call(r),'<div id="popUpList"><button id="x">x</button><div><p id="dollar">$</p><input type="text" value="0.00" id="itemPrice"><p>Price</p></div><div><p id="percent">%</p><input type="text" value="0" id="itemSale"><p>Sale</p></div><div><p id="hash">#</p><input type="text" value="1" id="itemAmount"><p>Amount</p></div></div><div id="buttons"><button id="addToCart">Add Item</button><button id="removeItemButton">Remove Item</button></div>',-38)}function n(e,t,n,a){var r=e.target.parentElement.parentElement,s=r.textContent.slice(0,-38),l=document.getElementById("itemPrice").value,o=document.getElementById("itemSale").value,c=document.getElementById("itemAmount").value,i=document.getElementById("groceryList"),d=document.getElementById("shoppingCart"),m=document.getElementById("past"),p=document.createElement("li"),u=parseFloat(l)*(parseFloat(o)/100),g=((parseFloat(l)-u)*parseFloat(c)).toFixed(2),y=document.createTextNode(s+": $"+g),I=t.indexOf(s);a.names.push(s),a.prices.push(l),a.sales.push(o),a.amounts.push(c),localStorage.cart=JSON.stringify(a),p.appendChild(y),p.className="cartItem",d.appendChild(p),(p=document.createElement("li")).innerHTML='<span class="pastLi">'+s+' </span><button class="pastX">x</button>',p.className="pastItem",m.appendChild(p),n.push(s),localStorage.pastItems=JSON.stringify(n),t.splice(I,1),localStorage.groceryList=JSON.stringify(t),i.removeChild(r)}function a(e,t,n,a,r){var s=e.target.parentElement.parentElement,l=s.textContent.slice(0,-38),o=document.createElement("li"),c=n.indexOf(l);o.innerHTML='<span class="pastLi">'+l+' </span><button class="pastX">x</button>',o.className="pastItem",a.appendChild(o),r.push(l),localStorage.pastItems=JSON.stringify(r),n.splice(c,1),localStorage.groceryList=JSON.stringify(n),t.removeChild(s)}function r(e,t,n,a,r){var s=e.target.parentElement,l=document.getElementsByClassName("pastItem"),o=Array.prototype.slice.call(l).indexOf(s),c=document.createElement("li"),i=r[o],d=document.createTextNode(i);c.appendChild(d),c.className="groceryItem",t.appendChild(c),n.push(i),localStorage.groceryList=JSON.stringify(n),r.splice(o,1),a.removeChild(s),localStorage.pastItems=JSON.stringify(r)}function s(e,t){var n=e.target.parentElement,a=document.getElementsByClassName("pastItem"),r=document.getElementById("past"),s=Array.prototype.slice.call(a).indexOf(n);r.removeChild(n),t.splice(s,1),localStorage.pastItems=JSON.stringify(t)}function l(e){document.getElementById("past").innerHTML='<li id=pastWarning class="warning">You have no past items</li>',e.length=0,localStorage.pastItems=JSON.stringify(e)}function o(e,t){var n,a,r=document.getElementById("groceryList"),s=document.getElementById("past");for(a=0;a<e.length;a++)(n=document.createElement("li")).innerHTML='<span class="pastLi">'+e[a]+' </span><button class="pastX">x</button>',n.className="pastItem",s.appendChild(n),t.push(e[a]);localStorage.pastItems=JSON.stringify(t),r.innerHTML='<li id=groceryWarning class="warning">Your grocery list is empty</li>',e.length=0,localStorage.groceryList=JSON.stringify(e)}function c(e,t,n){var a=e.target,r=a.textContent,s=document.getElementsByClassName("cartItem"),l=Array.prototype.slice.call(s),o=l.indexOf(a);n(e,a,r,s,l,'<div id="popUpCart"><button id="xCart">x</button><div><p id="dollarCart">$</p><input type="text" value="'+t.prices[o]+'" id="itemPriceCart"><p>Price</p></div><div><p id="percentCart">%</p><input type="text" value="'+t.sales[o]+'" id="itemSaleCart"><p>Sale</p></div><div><p id="hashCart">#</p><input type="text" value="'+t.amounts[o]+'" id="itemAmountCart"><p>Amount</p></div></div><div id="buttons"><button id="updateButton">Update Item</button><button id="rejectItemButton">Reject Item</button></div>',-41)}function i(e,t,n,a,r,s){var l=e.target.parentElement.parentElement,o=document.getElementById("itemPriceCart").value,c=document.getElementById("itemAmountCart").value,i=document.getElementById("itemSaleCart").value,d=parseFloat(o)*(parseFloat(i)/100),m=(parseFloat(o)-d)*parseFloat(c),p=document.getElementsByClassName("cartItem"),u=Array.prototype.slice.call(p).indexOf(l),g=a.names[u];"0"===c?s(e,t,n,a,r,"cartItem","rejectsItem","cart","rejects"):(a.prices[u]=o,a.sales[u]=i,a.amounts[u]=c,l.textContent=g+": $"+m.toFixed(2),localStorage.cart=JSON.stringify(a))}function d(e,t,n,a,r,s,l,o,c){var i,d,m,p,u,g,y,I,E=e.target.parentElement.parentElement,v=document.getElementsByClassName(s);"rejectsItem"===s&&(E=e.target),v=document.getElementsByClassName(s),i=Array.prototype.slice.call(v).indexOf(E),d=a.names[i],m=a.prices[i],p=a.sales[i],u=a.amounts[i],r.names.push(d),r.prices.push(m),r.sales.push(p),r.amounts.push(u),localStorage.setItem(c,JSON.stringify(r)),a.names.splice(i,1),a.prices.splice(i,1),a.sales.splice(i,1),a.amounts.splice(i,1),localStorage.setItem(o,JSON.stringify(a)),I=(m-m*(p/100))*u,g=document.createTextNode(d+": $"+I.toFixed(2)),(y=document.createElement("li")).appendChild(g),y.className=l,n.appendChild(y),t.removeChild(E)}function m(e,t){var n=document.getElementById("shoppingCart"),a=document.getElementById("rejects");n.innerHTML='<li id=cartWarning class="warning">Your grocery cart is empty</li>',a.innerHTML='<li id=rejectsWarning class="warning">You have no rejects</li>',e.names.length=0,e.prices.length=0,e.sales.length=0,e.amounts.length=0,t.names.length=0,t.prices.length=0,t.sales.length=0,t.amounts.length=0,localStorage.cart=JSON.stringify(e),localStorage.rejects=JSON.stringify(t)}function p(){var e,t,n,a,r,s,l=JSON.parse(localStorage.groceryList),o=JSON.parse(localStorage.pastItems),c=JSON.parse(localStorage.cart),i=JSON.parse(localStorage.rejects);if(l)for(e=0;e<l.length;e++)t=document.createElement("li"),n=document.createTextNode(l[e]),t.appendChild(n),t.className="groceryItem",document.getElementById("groceryList").appendChild(t);if(o)for(e=0;e<o.length;e++)(t=document.createElement("li")).innerHTML='<span class="pastLi">'+o[e]+' </span><button class="pastX">x</button>',t.className="pastItem",document.getElementById("past").appendChild(t);if(c)for(e=0;e<c.names.length;e++)a=c.prices[e]*(c.sales[e]/100),r=((c.prices[e]-a)*c.amounts[e]).toFixed(2),s=document.createTextNode(c.names[e]+": $"+r),(t=document.createElement("li")).appendChild(s),t.className="cartItem",document.getElementById("shoppingCart").appendChild(t);if(i)for(e=0;e<i.names.length;e++)a=i.prices[e]*(i.sales[e]/100),r=((i.prices[e]-a)*i.amounts[e]).toFixed(2),s=document.createTextNode(i.names[e]+": $"+r),(t=document.createElement("li")).appendChild(s),t.className="rejectsItem",document.getElementById("rejects").appendChild(t)}function u(e,t,n,a,r,s,l){var o,c,i;for(n.includes("x$Price")&&(n=n.slice(0,l)),t.innerHTML=n+s,o=0;o<a.length;o++)(i=(c=r[o]).textContent).includes("x$Price")&&(i=i.slice(0,l)),r[o]!==e.target&&(c.innerHTML=i)}function g(e){var t=e.getBoundingClientRect();t.top>=300&&t.top<340?window.scrollBy(0,50):t.top>=340&&t.top<380?window.scrollBy(0,100):t.top>=380&&t.top<420?window.scrollBy(0,150):t.top>=420&&t.top<460?window.scrollBy(0,200):t.top>=460&&t.top<500?window.scrollBy(0,250):t.top>=500&&t.top<545?window.scrollBy(0,300):t.top>=545&&t.top<590?window.scrollBy(0,300):t.top>=590&&t.top<630?window.scrollBy(0,300):t.top>=630&&t.top<650&&window.scrollBy(0,350)}function y(e){var t=e.target.parentElement.parentElement;t.innerHTML=t.textContent.slice(0,-38),"cartItem"===t.className&&(t.innerHTML=t.textContent.slice(0,-3))}function I(e,t,n,a,r){switch(e){case"groceryList":return e="pastItems",t.style.display="none",n.style.display="block",e;case"pastItems":return e="groceryList",t.style.display="block",n.style.display="none",e;case"cart":return e="rejects",a.style.display="none",r.style.display="block",e;case"rejects":return e="cart",a.style.display="block",r.style.display="none",e}}function E(){var e=document.getElementsByClassName("groceryItem"),t=document.getElementsByClassName("pastItem"),n=document.getElementsByClassName("cartItem"),a=document.getElementsByClassName("rejectsItem");0===e.length?document.getElementById("groceryWarning").style.display="block":document.getElementById("groceryWarning").style.display="none",0===n.length?document.getElementById("cartWarning").style.display="block":document.getElementById("cartWarning").style.display="none",0===a.length?document.getElementById("rejectsWarning").style.display="block":document.getElementById("rejectsWarning").style.display="none",0===t.length?document.getElementById("pastWarning").style.display="block":document.getElementById("pastWarning").style.display="none"}function v(e){var t,n,a=document.getElementsByTagName("input"),r=document.getElementById("groceryList"),s=document.getElementById("itemAmount");for(t=0;t<a.length;t++){if(n=a[t].parentElement.parentElement,e===n&&""===a[t].value)return window.alert("Whoops, you left a box blank!"),!1;if(e===n&&a[t].value.includes("%")){if(window.alert("You don't need to include the '%' sign, just the sale amount."),a[t].value=a[t].value.replace("%",""),""===a[t].value)return!1}else if(e===n&&a[t].value.includes("$")){if(window.alert("You don't need to include the '$' sign, just price itself."),a[t].value=a[t].value.replace("$",""),""===a[t].value)return!1}else{if(e===n&&isNaN(a[t].value))return window.alert("Hey, you can only put numbers in those boxes!"),a[t].value="",!1;if(e===n&&a[t].value.includes(".00"))window.alert("You don't need to put the '.00' if a price doesn't need change.");else if(r===n&&"0"===s.value)return window.alert("How are you adding 0 of something to your cart?"),s.value=1,!1}}return!0}function h(e){var t,n,a=0,r=e;for(n=0;n<r.prices.length;n++)t=r.prices[n]*(r.sales[n]/100),a+=(r.prices[n]-t)*r.amounts[n];document.getElementById("total").textContent="Cart Total: $"+a.toFixed(2)}var B=document.getElementById("content"),f=(document.getElementById("background"),document.getElementById("addItem"),document.getElementById("listWrapper")),N=document.getElementById("groceryList"),S=document.getElementById("pastWrapper"),C=document.getElementById("past"),x=document.getElementById("cartWrapper"),b=document.getElementById("shoppingCart"),L=document.getElementById("rejectsWrapper"),w=document.getElementById("rejects"),O=(document.getElementById("switchButton"),"cart"),j="groceryList",J=function(){var e,t,n,a;return localStorage.groceryList?e=JSON.parse(localStorage.groceryList):(e=[],localStorage.groceryList=JSON.stringify(e)),localStorage.pastItems?t=JSON.parse(localStorage.pastItems):(t=[],localStorage.pastItems=JSON.stringify(t)),localStorage.cart?n=JSON.parse(localStorage.cart):(n={names:[],prices:[],sales:[],amounts:[]},localStorage.cart=JSON.stringify(n)),localStorage.rejects?a=JSON.parse(localStorage.rejects):(a={names:[],prices:[],sales:[],amounts:[]},localStorage.rejects=JSON.stringify(a)),[e,t,n,a]}(),k=J[0],T=J[1],W=J[2],H=J[3];!function(){p(),E(),h(W)}(),B.addEventListener("click",function(e){"text"===e.target.type?e.target.value="":"background"===e.target.id&&(document.getElementById("bkgHead").style.visibility="visible")},!1),f.addEventListener("click",function(r){switch("groceryItem"===r.target.className&&(t(r,u),g(document.getElementById("popUpList"))),r.target.id){case"groceryButton":j=I(j,f,S,x,L);break;case"addItem":e(k);break;case"x":y(r);break;case"addToCart":v(document.getElementById("popUpList"))&&(n(r,k,T,W),h(W));break;case"removeItemButton":a(r,N,k,C,T)}E()},!1),S.addEventListener("click",function(e){switch("pastLi"===e.target.className?r(e,N,k,C,T):"pastX"===e.target.className&&s(e,T),e.target.id){case"deletePastItems":l(T);break;case"moveGroceryItems":o(k,T);break;case"pastButton":j=I(j,f,S,x,L)}E()},!1),x.addEventListener("click",function(e){switch("cartItem"===e.target.className&&(c(e,W,u),g(document.getElementById("popUpCart"))),e.target.id){case"xCart":y(e);break;case"cartButton":O=I(O,f,S,x,L);break;case"rejectItemButton":d(e,b,w,W,H,"cartItem","rejectsItem","cart","rejects"),h(W);break;case"updateButton":v(document.getElementById("popUpCart"))&&(i(e,b,w,W,H,d),h(W))}E()},!1),L.addEventListener("click",function(e){"rejectsItem"===e.target.className?(d(e,w,b,H,W,"rejectsItem","cartItem","rejects","cart"),h(W),E()):"rejectsButton"===e.target.id?O=I(O,f,S,x,L):"deleteCartRejects"===e.target.id&&(m(W,H),h(W))},!1)}();